# string 模拟实现

编写文字的编码



![image-20240423152426863](picture/image-20240423152426863.png)

![image-20240423155225679](picture/image-20240423155225679.png)

![image-20240423155500789](picture/image-20240423155500789.png)

![image-20240423160317871](picture/image-20240423160317871.png)

头文件展开

![image-20240423161645245](picture/image-20240423161645245.png)

![image-20240423162501260](picture/image-20240423162501260.png)

![image-20240423162739444](picture/image-20240423162739444.png)

![image-20240423163242413](picture/image-20240423163242413.png)

![image-20240423163320960](picture/image-20240423163320960.png)

 

![image-20240423164231594](picture/image-20240423164231594.png)

静态变量

![image-20240423165024520](picture/image-20240423165024520.png)

只有无符号整型可以

![image-20240423170023598](picture/image-20240423170023598.png)

![image-20240423170603925](picture/image-20240423170603925.png)

![image-20240423171532242](picture/image-20240423171532242.png)

![image-20240423171737065](picture/image-20240423171737065.png)

空格和换行都不作为字符输入，导致char类型的ch无法拿到空格进行结束判断

![image-20240423172412566](picture/image-20240423172412566.png)

![image-20240423172624352](picture/image-20240423172624352.png)

![image-20240423205312244](picture/image-20240423205312244.png)

strstr

![image-20240423213254653](picture/image-20240423213254653.png)

![image-20240423213813211](picture/image-20240423213813211.png)

![image-20240423215254463](picture/image-20240423215254463.png)

![image-20240424191312659](picture/image-20240424191312659.png)

![image-20240424191359778](picture/image-20240424191359778.png)

提前对内置类型处理![image-20240424191516050](picture/image-20240424191516050.png)

![image-20240424191928009](picture/image-20240424191928009.png)

交换后tmp指向的是this指向的空间，而出作用域后tmp析构，将之前this交换之前的空间销毁，同时this指向新空间

![image-20240424192058083](picture/image-20240424192058083.png)

就是delete[] _str

![image-20240424192223562](picture/image-20240424192223562.png)

更加极致，在传参的过程中，调用拷贝构造，然后交换空间，析构函数销毁tmp

流插入，减少开空间的次数

![image-20240424193309341](picture/image-20240424193309341.png)

每次字符大于128时插入一次

![image-20240424204825545](picture/image-20240424204825545.png)

防止内存碎片



引用计数

![image-20240424205515957](picture/image-20240424205515957.png)

![image-20240424205932479](picture/image-20240424205932479.png)

vs下是 深拷贝



![image-20240424210051082](picture/image-20240424210051082.png)

g++下是浅拷贝

![image-20240424210831202](picture/image-20240424210831202.png)

浅拷贝后对字符串进行写时拷贝

![image-20240424210901833](picture/image-20240424210901833.png)

编译器就会进行浅拷贝

![image-20240424211507959](picture/image-20240424211507959.png)
