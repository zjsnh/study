# 多态

![image-20240516212657151](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516212657151.png)

## 虚函数重写

**继承关系父子的两个虚函数，函数名，参数，返回值都相同才构成虚函数重写**

virtual只能修饰成员函数，用来构成多态

例外1：**协变：返回值可以不同，但返回值必须是父类或者子类的指针或者引用**，其他类也是可以的

例外2：子类虚函数重写可以不加virtual  （派生类）ps：建议加上

![image-20240516213541326](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516213541326.png)

![image-20240516213412634](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516213412634.png)

![image-20240516213321025](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516213321025.png)

![image-20240516214150397](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516214150397.png)

![image-20240516214137627](C:\Users\30780\AppData\Roaming\Typora\typora-user-images\image-20240516214137627.png)

由于特殊处理，析构函数在被处理后，函数名相同，父类加上virtual就可以正确调用，防止内存泄漏！  

ps：p先是指向基类 后被赋值为基类   可以赋值的原因是他们是基类和派生类，由于指针并不会对不同的类进行处理，将导致，后面析构的时候，delete不会对派生类进行特殊处理而是直接调用基类析构函数