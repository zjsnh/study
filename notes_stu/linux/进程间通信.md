# 进程间通信

![image-20240919182412682](D:\code\study\notes_stu\c++_note\picture\image-20240919182412682.png)



## 管道通信

文件之间的通信  |      

![image-20240920171336884](D:\code\study\notes_stu\c++_note\picture\image-20240920171336884.png)



![image-20240920174402546](D:\code\study\notes_stu\c++_note\picture\image-20240920174402546.png)

![image-20240920174252043](D:\code\study\notes_stu\c++_note\picture\image-20240920174252043.png)

结合实际场景，关闭读端或者写段用来单独写或者单独读

![image-20240920174303677](D:\code\study\notes_stu\c++_note\picture\image-20240920174303677.png)

进程打开文件如果采用同时读写的话，写入读取的偏移量会混乱，读写都是从当前的位置开始的，写过之后，读的话需要从头开始读才可以读到，如果有两个位置的话，不会影响偏移量，虽然关闭通信段不是必须的，但是还是建议关闭

![image-20240920174532897](D:\code\study\notes_stu\c++_note\picture\image-20240920174532897.png)

![image-20240920175856133](D:\code\study\notes_stu\c++_note\picture\image-20240920175856133.png)

单向通信  就是因为单向通信才叫管道，基于文件通信

![image-20240920212132812](D:\code\study\notes_stu\c++_note\picture\image-20240920212132812.png)

内存级管道设置接口

![image-20240920212404423](D:\code\study\notes_stu\c++_note\picture\image-20240920212404423.png)

![image-20240921083754812](D:\code\study\notes_stu\c++_note\picture\image-20240921083754812.png)

![image-20240921084121053](D:\code\study\notes_stu\c++_note\picture\image-20240921084121053.png)

**snprintf**  

**将需要显示的字符串写到一个字符串里**

![image-20240921084828811](D:\code\study\notes_stu\c++_note\picture\image-20240921084828811.png)

显示到buffer上，他会自动加入 \0  简易字符串报文

![image-20240921091445067](D:\code\study\notes_stu\c++_note\picture\image-20240921091445067.png)

read最后那个代表总字节数

![image-20240921085352694](D:\code\study\notes_stu\c++_note\picture\image-20240921085352694.png)

read的最后一个参数，是代表当前空间的最大大小，write是当前字符串的不包括\0 的数据的字节个数

**管道默认配置大小**

![image-20240921100157829](D:\code\study\notes_stu\c++_note\picture\image-20240921100157829.png)

8*512   4kb

![image-20240921100329517](D:\code\study\notes_stu\c++_note\picture\image-20240921100329517.png)

![image-20240921100541566](D:\code\study\notes_stu\c++_note\picture\image-20240921100541566.png)

centos默认64KB  ，在不同内核里，大小是有差异的

![image-20240921100727666](D:\code\study\notes_stu\c++_note\picture\image-20240921100727666.png)

单次向管道内写入的大小最大是 4096bytes

![image-20240921102002813](D:\code\study\notes_stu\c++_note\picture\image-20240921102002813.png)



## 共享内存