# 线程死锁  同步

![image-20241010173354144](D:\code\study\notes_stu\c++_note\picture\image-20241010173354144.png)

如何解决死锁

![image-20241010174329026](D:\code\study\notes_stu\c++_note\picture\image-20241010174329026.png)

## 同步

![image-20241010200214732](D:\code\study\notes_stu\c++_note\picture\image-20241010200214732.png)

![image-20241010200336287](D:\code\study\notes_stu\c++_note\picture\image-20241010200336287.png)

![image-20241010200614594](D:\code\study\notes_stu\c++_note\picture\image-20241010200614594.png)

![image-20241010200821337](D:\code\study\notes_stu\c++_note\picture\image-20241010200821337.png)

![image-20241010202827562](D:\code\study\notes_stu\c++_note\picture\image-20241010202827562.png)

唤醒线程 signal一个一个唤醒  broadcast  全部唤醒

![image-20241010203234774](D:\code\study\notes_stu\c++_note\picture\image-20241010203234774.png)

让主线程进行唤醒执行

![image-20241010203145793](D:\code\study\notes_stu\c++_note\picture\image-20241010203145793.png)

![image-20241010205027914](D:\code\study\notes_stu\c++_note\picture\image-20241010205027914.png)

![image-20241010214313268](D:\code\study\notes_stu\c++_note\picture\image-20241010214313268.png)

![image-20241012093842313](D:\code\study\notes_stu\c++_note\picture\image-20241012093842313.png)

![image-20241012101725943](D:\code\study\notes_stu\c++_note\picture\image-20241012101725943.png)

![image-20241012104202341](D:\code\study\notes_stu\c++_note\picture\image-20241012104202341.png)

防止伪唤醒使用while条件去添加队列 **消费了一个但是唤醒了多个生产**

## 信号量

![image-20241012111300329](D:\code\study\notes_stu\c++_note\picture\image-20241012111300329.png)

![](D:\code\study\notes_stu\c++_note\picture\image-20241012151208430.png)

![image-20241012153042974](D:\code\study\notes_stu\c++_note\picture\image-20241012153042974.png)

![image-20241012160039678](D:\code\study\notes_stu\c++_note\picture\image-20241012160039678.png)

P

![image-20241012160807146](D:\code\study\notes_stu\c++_note\picture\image-20241012160807146.png)

V

![image-20241012160816075](D:\code\study\notes_stu\c++_note\picture\image-20241012160816075.png)

![image-20241012161254702](D:\code\study\notes_stu\c++_note\picture\image-20241012161254702.png)

![image-20241012161430711](D:\code\study\notes_stu\c++_note\picture\image-20241012161430711.png)

![image-20241012162151259](D:\code\study\notes_stu\c++_note\picture\image-20241012162151259.png)
